/*折线图数据生成*/
$(function(){	
	
		Highcharts.setOptions({
			// 所有语言文字相关配置都设置在 lang 里
			lang : {
				resetZoom : '重置',
				resetZoomTitle : '重置缩放比例',
				printChart:"打印图表",
			    downloadJPEG: "下载JPEG 图片（白色背景）",
			    downloadPDF: "下载PDF 文档",
			    downloadPNG: "下载PNG 图片（透明背景）",
			    downloadSVG: "下载SVG 矢量图",
			    exportButtonTitle: "导出图片" 
			},
			plotOptions : {
				series : {
					lineWidth : 3
				}
			},tooltip: {
				backgroundColor: {
	                linearGradient: [0, 0, 0, 60],
	                stops: [
	                    [0, '#FFFFFF'],
	                    [1, '#E0E0E0']
	                ]
	            },
	            borderWidth: 1,
	            borderColor: '#AAA',
	            shadow: true,                 // 是否显示阴影
	            animation: true,               // 是否启用动画效果
	            style: {                      // 文字内容相关样式
	                color: "#000",
	                fontSize: "14px",
	                fontWeight: "blod",
	                fontFamily: "microsoft yahei"
	            }
	        },
			chart : {
				type: 'line',
				zoomType : 'x',
				selectionMarkerFill : 'rgba(0,0,0, 0.2)',
				panning : true,
				panKey : 'shift',
				resetZoomButton : {
					// 按钮定位
					position : {
						align : 'right', // by default
						verticalAlign : 'top', // by default
						x : 0,
						y : 0
					},
					// 按钮样式
					theme : {
						fill : 'white',
						stroke : 'silver',
						r : 0,
						states : {
							hover : {
								fill : '#41739D',
								style : {
									color : 'white'
								}
							}
						}
					}
				}
			}
		});

		
		/*******提示框单位***************/
		 var tooltip1 = "（kgce/tNH<sub>3</sub>）";//吨氨综合消耗
		 var tooltip2 = "（kgce/tNH<sub>3</sub>）";//吨氨天然气耗 (含蒸汽耗)(kgce/tNH3)
		 var tooltip3 = "（Nm<sup>3</sup>/tNH<sub>3</sub>）";//吨氨天然气耗
		 var tooltip4 = "（t/h）";// 小时氨产量 (含稀氨水折算)(t/h)
		 var tooltip5 = "（Nm<sup>3</sup>）";//班天然气耗(含蒸汽耗)(Nm3)
		 var tooltip6 = "（t）";//班氨产量(t)
		 var tooltip7 = "（Nm<sup>3</sup>）"//班天然气耗(Nm3)
		 var tooltip8 = "（t）"//班稀氨水(折氨量)(t)
		 /*********图例*****************/
		 var tuli1 = "吨氨综合消耗"; //图例1
		 var tuli2 = "吨氨天然气耗(含蒸汽耗)";//图例2
		 var tuli3 = "吨氨天然气耗";//图例3
		 var tuli4 = "小时氨产量(含稀氨水折算)"; //图例1
		 var tuli5 = "日天然气耗(含蒸汽耗)";//图例2
		 var tuli6 = "日氨产量";//图例3
		 var tuli7 = "日天然气耗";//图例3
		 var tuli8 = "日氨产量(含稀氨水折氨量)";//图例3

		 /***********按班查看图例***********/
		 var title1 = "吨氨综合消耗";
		 var title2 = "吨氨天然气耗(含蒸汽耗)";
		 var title3 = "吨氨天然气耗";
		 var title4 = "小时氨产量(含稀氨水折算)";
		 
		 
		 /*********************打开页面，时加载折线、柱状图、饼状图**************************************/
		 /***************日报表 按日查看***********************/
		 ajax_day("jf_loadDayDataForDayByAjax.action");
		 /***************日报表 按班查看***********************/
		 ajax_ban("jf_loadDayDataForClassByAjax.action");
		 
		 /***************月报表 按日查看***********************/
		 ajax_day("jf_loadMouthDataForDayByAjax.action");
		 /***************月报表 按班查看***********************/
		 ajax_ban("jf_loadMouthDataForClassByAjax.action");
		 
		 /***************季度报表***********************/
		 ajax_day("jf_loadQuarterDataForMouthByAjax.action");
		 /***************年报表***********************/
		 ajax_day("jf_loadYearDataForMouthByAjax.action");
		 
		 
		//ajax查询日报表按日请求   
		 $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);
		 $("#day_day_show").click(function(){
			 click_dayday();
		 	});
		//ajax查询日报表按班请求   
			$("#day_class_show").click(function(){
				click_dayban();
				});
		//ajax查询月报表按日请求   
		$("#month_day_show").click(function(){
				click_monthday();
			});
		//ajax查询月报表按班请求   
		$("#month_ban_show").click(function(){
			click_monthban();
			});
		//ajax查询季度报表 
		$("#season_show").click(function(){
				click_season();
			});
		//ajax查询年报表 
		$("#year_show").click(function(){
				click_year();
			});
		
		
		
		 /*点击查看ajax 日-日 函数*/
		 function click_dayday(){
			   var begin_day_class = $("#indate_day_day1").val();
		 	   var end_day_class = $("#indate_day_day2").val();
		 	  /*******数据***************/
		 	   var data1 = [];//数据1
		 	   var data2 = [];//数据2
		 	   var data3 = [];//数据3
		 	   var data4 = [];//数据2
		 	   var data5 = [];//数据3
		       var x_zuobiao = [];//横坐标 时间字符串转化而来
		 	   if(begin_day_class != "" &&  end_day_class != "" ){
		 		   if(begin_day_class > end_day_class){
		 			   alert("开始时间晚于结束时间，请重新选择！！");
		 			   return false;
		 		   };
		 		   var url = getRootPath()+"/jf_loadDayDataForDayByAjax.action";
		 		   var args = {"date_begin":begin_day_class,"date_end":end_day_class,"time": new Date()};
		 		   		$.post(url,args,
	 		    		 function(data){
		 		    	     var data_class = $.parseJSON(data); 
		 		    	     if(data_class.length <= 0){
	 						     alert("该时间段暂无数据，请重新选择！！");
	 						     return false;
	 					     };
		 		    	     $("#energy_day tr").not(":first").remove();
		 		    	     for(var i = 0; i < data_class.length; i++){
		 		    	    	 var ybs         = data_class[i].jfid;//样本数ok
		 		    	    	 if(data_class[i].jf_data_time){
		 		    	    		 var time    = data_class[i].jf_data_time;//时间段
		 		    	    	 }
		 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
		 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
		 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
		 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
		 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
		 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
		 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
		 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
		 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
		 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
		 		    	    	 var n_time      = renderTime(time.toString(),true);
		 		    	    	 //alert(rtrqh+"=="+data_class[i].Time_FIQ203+"++"+data_class[i].Time_steam_gas+"++"+rtrqh_hzqh)
		 		    	    	 //alert("时间："+n_time)
		 		    	    	
		 		    	    	 if(i == data_class.length - 1){
		 		    	    		//alert(rtrqh_hzqh+"=="+rtrqh_hzqh.toFixed(2))
			 		    	    	var newTr = "<tr><td>"
			 		    	    		+ "合计" +"</td><td>"//时间
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
			 		    	    	//alert(newTr)
			 		    	    	$("#energy_day").append(newTr);
		 		    	    	 }else{
		 		    	    		 //alert(i)
		 		    	    		var newTr = "<tr><td>"
		 		    	    			+ n_time +"</td><td>"//时间
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
		 		    	    		//alert(newTr)
		 		    	    		$("#energy_day").append(newTr);
		 		    	    	 }

		 		    	    	 if(i < data_class.length - 1){//图表不添加合计
		 		    	    		 data1.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
		 				    	     data2.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
		 				    		 data3.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
		 				    		 data4.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
			 		    			 x_zuobiao.push(renderTime(time.toString(),true)); //时间
		 		    	    	 }
		 		    	     };
		 		    	     
		 		    	     chart_day("container_day",x_zuobiao,"line",tooltip1,data1,tuli1);//吨氨综合消耗
		 		    		 chart_day("container_day_1",x_zuobiao,"line",tooltip2,data2,tuli2);//吨氨气耗(合计)
		 		    		 chart_day("container_day_2",x_zuobiao,"line",tooltip3,data3,tuli3);//吨氨天然气耗
		 		    		 chart_day("container_day_3",x_zuobiao,"line",tooltip4,data4,tuli4);//吨氨天然气耗
		 		       });
		 	   	  };
		 };
		 
	/*点击查看ajax 日-班 函数*/
	function click_dayban(){
		   var begin_day_class = $("#indate_day_ban1").val();
		   var end_day_class = $("#indate_day_ban2").val();
		   
			 /*******数据***************/
			 var data11 = [];//数据1
			 var data12 = [];//数据2
			 var data13 = [];//数据3
			 var data14 = [];//数据2
			 var data15 = [];//数据3
			 
			 var data21 = [];//数据1
			 var data22 = [];//数据2
			 var data23 = [];//数据3
			 var data24 = [];//数据1
			 var data25 = [];//数据2
			 
			 var data31 = [];//数据1
			 var data32 = [];//数据2
			 var data33 = [];//数据3
			 var data34 = [];//数据2
			 var data35 = [];//数据3
			 
			 var x_zuobiao = [];//横坐标 时间字符串转化而来
			 if(begin_day_class != "" &&  end_day_class != "" ){
			   if(begin_day_class > end_day_class){
				   alert("开始时间晚于结束时间，请重新选择！！");
				   return false;
			   };
			   var url = getRootPath()+"/jf_loadDayDataForClassByAjax.action";
			   var args = {"date_begin":begin_day_class,"date_end":end_day_class,"time": new Date()};
			   		$.post(url,args,function(data){
			   			 var data_class = $.parseJSON(data);
			    	     if(data_class.length <= 0){
							   alert("该时间段暂无数据，请重新选择！！");
							   return false;
						   };
			    	     $("#energy_day_ban tr").not(":first").remove();
			    	     for(var i = 0; i < data_class.length; i++){
			    	    	 
			    	    	 if(i%3 == 0 && data_class[i].jf_data_time){
			    	    		 var time = data_class[i].jf_data_time;//时间段
		 		    	    	 x_zuobiao.push(renderTime(time.toString(),true)); //时间
			    			 }//时间
			    	    	 var ybs         = data_class[i].jfid;//样本数ok
	 		    	    	 if(data_class[i].jf_data_time){
	 		    	    		 var time    = data_class[i].jf_data_time;//时间段
	 		    	    	 }
	 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
	 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
	 		    	    	 var n_time      = renderTime(time.toString(),true);
	 		    	    	 var ban        = data_class[i].classNumber;
	 		    	    	 var class_number = 0;
	 		    	    	 if(data_class[i].shift != '0'){
	 		    	    		class_number = parseInt(data_class[i].shift/ybs);//123
	 		    	    	 }
	 		    	    	
	 		    	    	 ban = parseInt(ban);
			    	    	 if(i < data_class.length-4){
			    	    		 switch(ban)//折线图数据
				    	    	 {
					    	    	 case 1:
					    	    		 ban="白班("+class_number+")";
					    	    		 data11.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data12.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data13.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data14.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 case 2:
					    	    		 ban="中班("+class_number+")";
					    	    		 data21.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data22.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data23.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data24.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 case 3:
					    	    		 ban="夜班("+class_number+")";
					    	    		 data31.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data32.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data33.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data34.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 }
			    	    	
			    	    		 
			    	    		 var newTr = "<tr><td>"
			    	    			+n_time+"</td><td>"
			    	    			+ban+"</td><td>"
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
			 		    	     if(racl.toFixed(0) == 0){
		 		    	    		var newTr = "<tr><td>"+n_time+"</td><td>"+ban+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
			 		    	    	 +"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
			 		    	    	 +"0"+"</td></tr>";
			 		    	    }
				    	    	$("#energy_day_ban").append(newTr);
			    	    	 }else{
			    	    		 var newTr = "<tr><td>"
			    	    			+ "合计"+"</td><td>"
			    	    			+ (ban%10)+" 班</td><td>"
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
		    	    		 	if(racl.toFixed(0) == 0){
		 		    	    		var newTr = "<tr><td>"+"合计"+"</td><td>"+ban+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
			 		    	    	 +"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
			 		    	    	 +"0"+"</td></tr>";
			 		    	    }
				    	    	$("#energy_day_ban").append(newTr);
			    	    	 }
			    	    	 
			    	    }
			    	     /*合并行*/
			  		     _w_table_rowspan("#energy_day_ban",1);
			  		     _w_table_rowspan("#energy_month_ban",1);
			  		     
			    	     chart_ban("container_day_ban_1",x_zuobiao,title1,tooltip1,data11,data21,data31);//吨氨综合消耗
			    	     chart_ban("container_day_ban_2",x_zuobiao,title2,tooltip2,data12,data22,data32);//吨氨气耗
			    		 chart_ban("container_day_ban_3",x_zuobiao,title3,tooltip3,data13,data23,data33);//吨氨净蒸汽耗
			    		 chart_ban("container_day_ban_4",x_zuobiao,title4,tooltip4,data14,data24,data34);//吨氨气耗
			      
			   		});
			    };
			};
	  
	/*点击查看ajax 月-日 函数*/
	function click_monthday(){
		   var begin_month_class = $("#indate_month_day1").val();
		   var data1 = [];//数据1
		   var data2 = [];//数据2
		   var data3 = [];//数据3
		   var data4 = [];//数据2
		   var data5 = [];//数据3
		   var x_zuobiao = [];//横坐标 时间字符串转化而来
		   if(begin_month_class != ""){
			   var url = getRootPath()+"/jf_loadMouthDataForDayByAjax.action";
			   var args = {"mouth_date_begin":begin_month_class,"time": new Date()};
			        $.post(url,args,function(data){
			    	     var data_class = $.parseJSON(data); 
			    	     if(data_class.length <= 0){
							   alert("该时间段暂无数据，请重新选择！！");
							   return false;
						   };
			    	     $("#energy_month_day tr").not(":first").remove();
			    	     for(var i = 0; i < data_class.length; i++){
			    	    	 var ybs         = data_class[i].jfid;//样本数ok
	 		    	    	 if(data_class[i].jf_data_time){
	 		    	    		 var time    = data_class[i].jf_data_time;//时间段
	 		    	    	 }
	 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
	 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
	 		    	    	 var n_time      = renderTime(time.toString(),true);
	 		    	    	if(i == data_class.length - 1){
	 		    	    		//alert(rtrqh_hzqh+"=="+rtrqh_hzqh.toFixed(2))
		 		    	    	var newTr = "<tr><td>"
		 		    	    		+ "合计" +"</td><td>"//时间
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
		 		    	    	//alert(newTr)
		 		    	    	$("#energy_month_day").append(newTr);
	 		    	    	 }else{
	 		    	    		 //alert(i)
	 		    	    		var newTr = "<tr><td>"
	 		    	    			+ n_time +"</td><td>"//时间
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
	 		    	    		//alert(newTr)
	 		    	    		$("#energy_month_day").append(newTr);
	 		    	    	 }
	 		    	    	if(i < data_class.length - 1){
	 		    	    		 data1.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
	 				    	     data2.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
	 				    		 data3.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
	 				    		 data4.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
	
				    			 x_zuobiao.push(renderTime(time.toString(),true)); //时间
	 		    	    	}
			    	     };
			    	     chart_day("container_month_day",x_zuobiao,"line",tooltip1,data1,tuli1);//吨氨综合消耗
			    	     chart_day("container_month_day_1",x_zuobiao,"line",tooltip2,data2,tuli2);//吨氨气耗
			    		 chart_day("container_month_day_2",x_zuobiao,"line",tooltip3,data3,tuli3);//吨氨净蒸汽耗(
			    		 chart_day("container_month_day_3",x_zuobiao,"line",tooltip4,data4,tuli4);//吨氨气耗
			    		 chart_day("container_month_day_4",x_zuobiao,"line",tooltip5,data5,tuli5);//吨氨净蒸汽耗(
			    		 
			       });
			 };
		};
		
	/*点击查看ajax 月-班 函数*/
	function click_monthban(){
		   var begin_month_class = $("#indate_month_ban1").val();
		   /*******数据***************/
			 var data11 = [];//数据1
			 var data12 = [];//数据2
			 var data13 = [];//数据3
			 var data14 = [];//数据2
			 var data15 = [];//数据3
			 
			 var data21 = [];//数据1
			 var data22 = [];//数据2
			 var data23 = [];//数据3
			 var data24 = [];//数据1
			 var data25 = [];//数据2
			 
			 var data31 = [];//数据1
			 var data32 = [];//数据2
			 var data33 = [];//数据3
			 var data34 = [];//数据2
			 var data35 = [];//数据3
			 
			
			 var x_zuobiao = [];//横坐标 时间字符串转化而来
			 if(begin_month_class != ""){
			   var url = getRootPath()+"/jf_loadMouthDataForClassByAjax.action";
			   var args = {"mouth_date_begin":begin_month_class,"time": new Date()};
			   		$.post(url,args,function(data){
			    	     var data_class = $.parseJSON(data); 
			    	     if(data_class.length <= 0){
							   alert("该时间段暂无数据，请重新选择！！");
							   return false;
						   };
			    	     $("#energy_month_ban tr").not(":first").remove();
			    	     for(var i = 0; i < data_class.length; i++){
			    	    	 if(i%3 == 0 && data_class[i].jf_data_time){
			    	    		 var time = data_class[i].jf_data_time;//时间段
		 		    	    	 x_zuobiao.push(renderTime(time.toString(),true)); //时间
			    			 }//时间
			    	    	 var ybs         = data_class[i].jfid;//样本数ok
	 		    	    	 if(data_class[i].jf_data_time){
	 		    	    		 var time    = data_class[i].jf_data_time;//时间段
	 		    	    	 }
	 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
	 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
	 		    	    	 var n_time      = renderTime(time.toString(),true);
	 		    	    	 var ban        = data_class[i].classNumber;
	 		    	    	 var class_number = 0;
	 		    	    	 if(data_class[i].shift != '0'){
	 		    	    		class_number = parseInt(data_class[i].shift/ybs);//123
	 		    	    	 }
	 		    	    	 
			    	    	 ban = parseInt(ban);
			    	    	 
			    	    	 if(i < data_class.length-4){//除去后四条合计
			    	    		 switch(ban)//折线图数据
				    	    	 {
					    	    	 case 1:
					    	    		 ban="白班("+class_number+")";
					    	    		 data11.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data12.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data13.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data14.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 case 2:
					    	    		 ban="中班("+class_number+")";
					    	    		 data21.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data22.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data23.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data24.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 case 3:
					    	    		 ban="夜班("+class_number+")";
					    	    		 data31.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
							    	     data32.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
							    		 data33.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
							    		 data34.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    	    		 break;
					    	    	 }
			    	    		 
			    	    		 
			    	    		 var newTr = "<tr><td>"
				    	    			+n_time+"</td><td>"
				    	    			+ban+"</td><td>"
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
				 		    	     if(racl.toFixed(0) == 0){
			 		    	    		var newTr = "<tr><td>"+n_time+"</td><td>"+ban+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
				 		    	    	 +"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
				 		    	    	 +"0"+"</td></tr>";
				 		    	    }
					    	    	$("#energy_month_ban").append(newTr);
				    	    	 }else{
				    	    		 var newTr = "<tr><td>"
				    	    			+ "合计"+"</td><td>"
				    	    			+ (ban%10)+" 班</td><td>"
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
			    	    		 	if(racl.toFixed(0) == 0){
			 		    	    		var newTr = "<tr><td>"+"合计"+"</td><td>"+ban+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
				 		    	    	 +"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"+"--"+"</td><td>"
				 		    	    	 +"0"+"</td></tr>";
				 		    	    }
					    	    	$("#energy_month_ban").append(newTr);
				    	    	 }
			    	     }
			    	     /*合并行*/
			  		     _w_table_rowspan("#energy_day_ban",1);
			  		     _w_table_rowspan("#energy_month_ban",1);
			  		     
			    	     chart_ban("container_month_ban_1",x_zuobiao,title1,tooltip1,data11,data21,data31);//吨氨综合消耗
			    	     chart_ban("container_month_ban_2",x_zuobiao,title2,tooltip2,data12,data22,data32);//吨氨气耗
			    		 chart_ban("container_month_ban_3",x_zuobiao,title3,tooltip3,data13,data23,data33);//吨氨净蒸汽耗
			    		 chart_ban("container_month_ban_4",x_zuobiao,title4,tooltip4,data14,data24,data34);//吨氨气耗
			   		});
			};
		}; 
		
	/*点击查看ajax 季度函数*/
	function click_season(){
		var begin_season_year = $("#indate_year").val();
		var begin_season_season = $("#indate_season_season").val();
		
		 var data1 = [];//数据1
		 var data2 = [];//数据2
		 var data3 = [];//数据3
		 var data4 = [];//数据3
		 var data5 = [];//数据3
		 var data6 = [];//数据3
		 var data7 = [];//数据3
		 var data8 = [];//数据3
	
		 var x_zuobiao = [];//横坐标 时间字符串转化而来
		 
		   if(begin_season_year != ""&& begin_season_season != ""){
			   var url = getRootPath()+"/jf_loadQuarterDataForMouthByAjax.action";
			   var args = {"Quarter_year":begin_season_year,"Quarter":begin_season_season,"time": new Date()};
				   $.post(url,args,function(data){
			    	   //alert(data)
			    	     var data_class = $.parseJSON(data); 
			    	     if(data_class.length <= 0){
							   alert("该时间段暂无数据，请重新选择！！");
							   return false;
						   };
			    	     $("#energy_season tr").not(":first").remove();
			    	     for(var i = 0; i < data_class.length; i++){
			    	    	 var ybs        = data_class[i].jfid;//样本数
	 		    	    	 if(data_class[i].jf_data_time){
	 		    	    		 var time       = data_class[i].jf_data_time;//时间段
	 		    	    	 }
	 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
	 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
			    	    	 var n_time     = renderTime(time.toString(),true).substring(0, 7);
			    	    	
	 		    	    	//alert(data_class.length)
			    	    	 if(i == data_class.length - 1){
		 		    	    		var newTr = "<tr><td>"
			 		    	    		+ "合计" +"</td><td>"//时间
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
			 		    	    	//alert(newTr)
			 		    	    	$("#energy_season").append(newTr);
			 		    	    	
			 		    	    	data1.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
						    	     data2.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
						    		 data3.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
						    		 data4.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
					    			 
						    		 data5.push([renderTime(time.toString(),true).substring(0, 7),Math.round(rtrqh_hzqh*100)/100]) ;        //数据2  月氨产量(t)
					    			 data6.push([renderTime(time.toString(),true).substring(0, 7),Math.round(racl*100)/100]) ; 
					    			 data7.push([renderTime(time.toString(),true).substring(0, 7),Math.round(rtrqh*100)/100]) ;        //数据2  月氨产量(t)
					    			 data8.push([renderTime(time.toString(),true).substring(0, 7),Math.round(racl_hxaszal*100)/100]) ; //数据2  月天然气耗(Nm3)
					    			 
					    			 x_zuobiao.push(renderTime(time.toString(),true).substring(0, 7)); //时间
		 		    	    	 }else{
		 		    	    		 //alert(i)
		 		    	    		var newTr = "<tr><td>"
		 		    	    			+ n_time +"</td><td>"//时间
		 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
		 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
		 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
				 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
				 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
				 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
				 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
				 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
				 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
				 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
				 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
		 		    	    		//alert(newTr)
		 		    	    		$("#energy_season").append(newTr);
		 		    	    		
		 		    	    	 }
		 		    	     
			    	    	 
			    			 
			    		 }
			    	    
			    	     
			    	     chart_day("container_season",x_zuobiao,"column",tooltip1,data1,tuli1);//吨氨综合消耗
			    	     chart_day("container_season_1",x_zuobiao,"column",tooltip2,data2,tuli2);//吨氨气耗(合计)
			    		 chart_day("container_season_2",x_zuobiao,"column",tooltip3,data3,tuli3);//吨氨天然气耗
			    		 chart_day("container_season_3",x_zuobiao,"column",tooltip4,data4,tuli4);//吨氨气耗(合计)
			    		 
			    		 chart_day("container_season_r",x_zuobiao,"pie",tooltip5,data5,tuli5);//月氨产量(t)
			    		 chart_day("container_season_r1",x_zuobiao,"pie",tooltip6,data6,tuli6);//月气耗(Nm3)
			    		 chart_day("container_season_r2",x_zuobiao,"pie",tooltip7,data7,tuli7);//月氨产量(t)
			    		 chart_day("container_season_r3",x_zuobiao,"pie",tooltip8,data8,tuli8);//月气耗(Nm3)
			    		
			    	});
			};
		};
		
	/*点击查看ajax 年函数*/
	function click_year(){
		var begin_year = $("#indate_year").val();
	
		var data1 = [];//数据1
		var data2 = [];//数据2
		var data3 = [];//数据3
		var data4 = [];//数据3
		var data5 = [];//数据3
		var data6 = [];//数据3
		var data7 = [];//数据3
		var x_zuobiao = [];//横坐标 时间字符串转化而来
		if(begin_year != ""){
			   var url = getRootPath()+"/jf_loadYearDataForMouthByAjax.action";
			   var args = {"Year_data_begin":begin_year,"time": new Date()};
			   $.post(url,args,function(data){
			    	   var data_class = $.parseJSON(data); 
			    	   if(data_class.length <= 0){
							   alert("该时间段暂无数据，请重新选择！！");
							   return false;
						   };
			    	     $("#energy_year tr").not(":first").remove();
			    	     for(var i = 0; i < data_class.length; i++){
			    	    	 var ybs        = data_class[i].jfid;//样本数
	 		    	    	 if(data_class[i].jf_data_time){
	 		    	    		 var time       = data_class[i].jf_data_time;//时间段
	 		    	    	 }
	 		    	    	 var racl        = data_class[i].time_FIQ162;//日氨产量
	 		    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	 		    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	 		    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	 		    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	 		    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	 		    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	 		    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	 		    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	 		    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
	 		    	    	 var n_time  = renderTime(time.toString(),true).substring(0, 7);
			    	    	 

	 		    	    	if(i == data_class.length - 1){
	 		    	    		var newTr = "<tr><td>"
		 		    	    		+ "合计" +"</td><td>"//时间
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
		 		    	    	//alert(newTr)
		 		    	    	$("#energy_year").append(newTr);
		 		    	    	
		 		    	    	
	 		    	    	 }else{
	 		    	    		 //alert(i)
	 		    	    		var newTr = "<tr><td>"
	 		    	    			+ n_time +"</td><td>"//时间
	 		    	    			+ racl.toFixed(2) +"</td><td>"//日氨产量ok
	 		    	    			+ rxas_zal.toFixed(3) +"</td><td>"//日稀氨水(折氨量)(t)ok
	 		    	    			+ rtrqh.toFixed(2) +"</td><td>"//日天然气耗(Nm3)ok
			 		    	    	+ rzqh_zbm.toFixed(2) +"</td><td>"//日蒸汽耗(折标煤)(kgce)ok
			 		    	    	+ racl_hxaszal.toFixed(2) +"</td><td>"//日氨产量(含稀氨水折氨量)ok
			 		    	    	+ rtrqh_hzqh.toFixed(2) +"</td><td>"//日天然气耗(含蒸汽耗)ok
			 		    	    	+ xsacl_hxaszs.toFixed(2) +"</td><td>"//小时氨产量ok
			 		    	    	+ datrqh.toFixed(2) +"</td><td>"//吨氨天然气耗ok
			 		    	    	+ datrqh_hzqh.toFixed(2) +"</td><td>"//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)ok
			 		    	    	+ dazhxh.toFixed(2) +"</td><td>"//吨氨综合消耗ok
			 		    	    	+ parseInt(ybs) +"</td></tr>";//样本数
	 		    	    		//alert(newTr)
	 		    	    		$("#energy_year").append(newTr);
	 		    	    		data1.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
		 			    	     data2.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
		 			    		 data3.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
		 			    		 data4.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
			    			 
				    			 /*data6.push([renderTime(time.toString(),true).substring(0, 7),Math.round(racl*100)/100]) ;        //数据2  月氨产量(t)
				    			 data7.push([renderTime(time.toString(),true).substring(0, 7),Math.round(rtrqh_hzqh*100)/100]) ;       //数据2  月天然气耗(Nm3)
				    			 */
				    			 x_zuobiao.push(renderTime(time.toString(),true).substring(0, 7)); //时间
	 		    	    	 }
	 		    	    	
	 		    	    	
		    		 }
			    	     
			    	     chart_day("container_year",x_zuobiao,"column",tooltip1,data1,tuli1);//吨氨综合消耗
			    	     chart_day("container_year_1",x_zuobiao,"column",tooltip2,data2,tuli2);//吨氨气耗
			    		 chart_day("container_year_2",x_zuobiao,"column",tooltip3,data3,tuli3);//吨氨净蒸汽耗(
			    		 chart_day("container_year_3",x_zuobiao,"column",tooltip4,data4,tuli4);//吨氨气耗
			    		 
			    	});
			};
		};
	
	
	/***************按班查看函数***********************/
	function ajax_ban(url){
		 var new_url = getRootPath()+"/"+url;//请求地址
		 var args = {"isdate":"1","time": new Date()};
		 /*******数据***************/
		 var data11 = [];//数据1
		 var data12 = [];//数据2
		 var data13 = [];//数据3
		 var data14 = [];//数据2
		 
		 var data21 = [];//数据1
		 var data22 = [];//数据2
		 var data23 = [];//数据3
		 var data24 = [];//数据2
		 
		 var data31 = [];//数据1
		 var data32 = [];//数据2
		 var data33 = [];//数据3
		 var data34 = [];//数据2
		 var x_zuobiao = [];//横坐标 时间字符串转化而来
		 $.post(new_url,args,function(data){
			 data_class = $.parseJSON(data);
			 for(var i = 0; i < data_class.length - 1; i++){
				 
				 var ybs = data_class[i].jfid;//样本数
				 if(i%3 == 0){
					 if(data_class[i].jf_data_time){
		    	    		 var time       = data_class[i].jf_data_time;//时间段
		    	    	 }
					 x_zuobiao.push(renderTime(time.toString(),true)); //时间
					 }//时间
				 
					 var racl        = data_class[i].time_FIQ162;//日氨产量
	    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
			    	 var ban     = data_class[i].classNumber;//早中晚班
			    	 ban = parseInt(ban);
			    	 switch(ban)
	    	    	 {
	    	    	 case 1:
	    	    		 ban="白班";
	    	    		 data11.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
			    	     data12.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
			    		 data13.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
			    		 data14.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
	    	    		 break;
	    	    	 case 2:
	    	    		 ban="中班";
	    	    		 data21.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
			    	     data22.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
			    		 data23.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
			    		 data24.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
			    		 break;
	    	    	 case 3:
	    	    		 ban="夜班";
	    	    		 data31.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
			    	     data32.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
			    		 data33.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
			    		 data34.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
	    	    		 break;
	    	    	 }
			    	
			    	 
			 }
	
			 /*highchart参数顺序 
			 *id 横坐标 标题  弹窗单位 数据一 图例一  数据和图例可以为空
			 *实际函数中多了一个X轴间隔interval无需传入*/
			 // chart_ban(id,x_zuobiao,title,tooltip1,data11,data12,data13)//吨氨综合消耗
			 //alert(data13)function chart_ban(id,x_zuobiao,title,tooltip,data1)
			 
			 if(url == "jf_loadDayDataForClassByAjax.action"){
				 chart_ban("container_day_ban_1",x_zuobiao,title1,tooltip1,data11,data21,data31);//吨氨综合消耗
				 chart_ban("container_day_ban_2",x_zuobiao,title2,tooltip2,data12,data22,data32);//吨氨气耗
				 chart_ban("container_day_ban_3",x_zuobiao,title3,tooltip3,data13,data23,data33);//吨氨净蒸汽耗
				 chart_ban("container_day_ban_4",x_zuobiao,title4,tooltip4,data14,data24,data34);//吨氨净蒸汽耗
			 }else if(url == "jf_loadMouthDataForClassByAjax.action"){
				 chart_ban("container_month_ban_1",x_zuobiao,title1,tooltip1,data11,data21,data31);//吨氨综合消耗
				 chart_ban("container_month_ban_2",x_zuobiao,title2,tooltip2,data12,data22,data32);//吨氨气耗
				 chart_ban("container_month_ban_3",x_zuobiao,title3,tooltip3,data13,data23,data33);//吨氨净蒸汽耗
				 chart_ban("container_month_ban_4",x_zuobiao,title4,tooltip4,data14,data24,data34);//吨氨气耗
	
			 }
		});
	}
	/***************按日查看函数***********************/
	function ajax_day(url){
		 var new_url = getRootPath()+"/"+url;//请求地址
		 var args = {"isdate":"1","time": new Date()};
		 var data1 = [];//数据1
		 var data2 = [];//数据2
		 var data3 = [];//数据3
		 var data4 = [];//数据3
		 var data5 = [];//数据3
		 if(url == "jf_loadQuarterDataForMouthByAjax.action"){//季度报表 柱状图数据
			 var data6 = [];//数据3
			 var data7 = [];//数据3
			 var data8 = [];//数据3
			 var data9 = [];//数据3
		 }
		 var x_zuobiao = [];//横坐标 时间字符串转化而来
		 var x_zuobiao_s = [];//季度X
		 var x_zuobiao_y = [];//年X
		 
		 $.post(new_url,args,function(data){
			 data_class = $.parseJSON(data);
			 /*年度季度没有最后一行合计数据，所以不减一*/
			 
				 for(var i = 0; i < data_class.length-1; i++){
					 var ybs        = data_class[i].jfid;//样本数
	    	    	 if(data_class[i].jf_data_time){
	    	    		 var time       = data_class[i].jf_data_time;//时间段
	    	    	 }
					 var racl        = data_class[i].time_FIQ162;//日氨产量
	    	    	 var rxas_zal    = data_class[i].time_purge_nh3;//日稀氨水(折氨量)(t)
	    	    	 var rtrqh       = data_class[i].time_FIQ203;//日天然气耗(Nm3)
	    	    	 var rzqh_zbm    = data_class[i].time_steam_coal ;//日蒸汽耗(折标煤)(kgce)
	    	    	 var racl_hxaszal= data_class[i].time_NH3;//日氨产量(含稀氨水折氨量)
	    	    	 var rtrqh_hzqh  = data_class[i].time_FIQ203 + data_class[i].time_steam_gas;//日天然气耗(含蒸汽耗)(Nm3)
	    	    	 var xsacl_hxaszs= data_class[i].time_NH3 / ybs * 6;//小时氨产量
	    	    	 var datrqh      = data_class[i].time_FIQ203/ data_class[i].time_purge_nh3;//吨氨天然气耗
	    	    	 var datrqh_hzqh = rtrqh_hzqh / rxas_zal;//吨氨天然气耗(含蒸汽耗)(kgce/tNH3)
	    	    	 var dazhxh      = datrqh_hzqh * 1.2143//吨氨综合消耗 
	    	    	 
	    	    	 
	    	    	 
	    	    	 
	    	    	 data1.push(Math.round(dazhxh*100)/100);             //吨氨综合消耗
		    	     data2.push(Math.round(datrqh_hzqh*100)/100) ;            //吨氨天然气耗(含蒸汽耗)
		    		 data3.push(Math.round(datrqh*100)/100) ;            // 吨氨天然气耗
		    		 data4.push(Math.round(xsacl_hxaszs*100)/100) ;            //小时氨产量 (含稀氨水折算)(t/h)
		    		 x_zuobiao.push(renderTime(time.toString(),true)); //时间
		    		 if(url == "jf_loadQuarterDataForMouthByAjax.action"){//季度报表 柱状图数据
						 x_zuobiao_s.push(renderTime(time.toString(),true).substring(0, 7)); //季度时间
						 data6.push([renderTime(time.toString(),true).substring(0, 7),Math.round(rtrqh_hzqh*100)/100]) ;        //数据2  月氨产量(t)
		    			 data7.push([renderTime(time.toString(),true).substring(0, 7),Math.round(racl*100)/100]) ;       //数据2  月天然气耗(Nm3)
		    			 data8.push([renderTime(time.toString(),true).substring(0, 7),Math.round(rtrqh*100)/100]) ;        //数据2  月氨产量(t)
		    			 data9.push([renderTime(time.toString(),true).substring(0, 7),Math.round(racl_hxaszal*100)/100]) ;       //数据2  月天然气耗(Nm3)
					 }
					 if(url == "jf_loadYearDataForMouthByAjax.action"){
						 x_zuobiao_y.push(renderTime(time.toString(),true).substring(0, 7)); //年时间
					 }
				 
				 }
			
			 

			 /*highchart参数顺序 
			 *id 横坐标 标题  弹窗单位 数据一 图例一  数据和图例可以为空
			 *实际函数中多了一个X轴间隔interval无需传入*/
			 //chart("test_test",x_zuobiao,tooltip1,data1,tuli1);//吨氨综合消耗
			 if(url == "jf_loadDayDataForDayByAjax.action"){//日报表
				 chart_day("container_day"  ,x_zuobiao,"line",tooltip1,data1,tuli1);//吨氨综合消耗
				 chart_day("container_day_1",x_zuobiao,"line",tooltip2,data2,tuli2);//吨氨气耗(合计)
				 chart_day("container_day_2",x_zuobiao,"line",tooltip3,data3,tuli3);//吨氨天然气耗
				 chart_day("container_day_3",x_zuobiao,"line",tooltip4,data4,tuli4);//吨氨气耗(合计)
			 }else if(url == "jf_loadMouthDataForDayByAjax.action"){//月报表
				 chart_day("container_month_day"  ,x_zuobiao,"line",tooltip1,data1,tuli1);//吨氨综合消耗
				 chart_day("container_month_day_1",x_zuobiao,"line",tooltip2,data2,tuli2);//吨氨气耗
				 chart_day("container_month_day_2",x_zuobiao,"line",tooltip3,data3,tuli3);//吨氨净蒸汽耗
				 chart_day("container_month_day_3",x_zuobiao,"line",tooltip4,data4,tuli4);//吨氨气耗
			 }else if(url == "jf_loadQuarterDataForMouthByAjax.action"){//季度报表
				 chart_day("container_season"  ,x_zuobiao_s,"column",tooltip1,data1,tuli1);//吨氨综合消耗
				 chart_day("container_season_1",x_zuobiao_s,"column",tooltip2,data2,tuli2);//吨氨气耗(合计)
				 chart_day("container_season_2",x_zuobiao_s,"column",tooltip3,data3,tuli3);//吨氨天然气耗
				 chart_day("container_season_3",x_zuobiao_s,"column",tooltip4,data4,tuli4);//吨氨气耗(合计)
	
				 chart_day("container_season_r" ,x_zuobiao,"pie",tooltip5,data6,tuli5);//月氨产量(t)
				 chart_day("container_season_r1",x_zuobiao,"pie",tooltip6,data7,tuli6);//月气耗(Nm3)
				 chart_day("container_season_r2" ,x_zuobiao,"pie",tooltip7,data8,tuli7);//月氨产量(t)
				 chart_day("container_season_r3",x_zuobiao,"pie",tooltip8,data9,tuli8);//月气耗(Nm3)
			 }else if(url == "jf_loadYearDataForMouthByAjax.action"){//年报表
				 chart_day("container_year",x_zuobiao_y,"column",tooltip1,data1,tuli1);//吨氨综合消耗
				 chart_day("container_year_1",x_zuobiao_y,"column",tooltip2,data2,tuli2);//吨氨气耗
				 chart_day("container_year_2",x_zuobiao_y,"column",tooltip3,data3,tuli3);//吨氨净蒸汽耗(
				 chart_day("container_year_3",x_zuobiao_y,"column",tooltip4,data4,tuli4);//吨氨气耗
			 }
	
		 });
	}
	
	/*highcharts按 日   查看统一设置值函数*/
	function chart_day(id,x_zuobiao,type,tooltip,data1,tuli1){
		/*设置横坐标间隔 X坐标最多放15个*/
		var dateLength = x_zuobiao.length;
		var itv = 1;
		for(var i = 15; i < dateLength; i++){
			itv = Math.ceil(i/15);//对15向上取整，所以interval最大值为15
	    		//alert(interval)
		   };
		var chart = {
				type: type
		};
		var title = {
		       text: tuli1   
		   };
	   var subtitle = {
			useHTML: true,
	        text: '最高值：' + Math.max.apply(null, data1) + tooltip + '，最低值：'
			+ Math.min.apply(null, data1) + tooltip,
			style:{
				fontWeight: 'bold',
				fontSize: '14px',
				fontFamily: 'YouYuan'
			}
	   };
	   var xAxis = {
	       categories: x_zuobiao,
	       tickInterval:itv
	   };
	   var credits= {
	           enabled: false
	       };
	   var yAxis = {
	      title: {
	         text: ' '
	      },
	      plotLines: [{
	         value: 0,
	         width: 1,
	         color: '#808080'
	      }]
	   };   
	   var tooltip = {
		  valueSuffix: tooltip,
	      useHTML: true,
	      crosshairs: [{
	        width: 1,
	        color: 'red'
	      }, {
	        width: 1,
	        color: 'red'
	      }]
	   };
	   if(type == 'pie'){//饼图设置百分比
		   tooltip.pointFormat = '{series.name}: <b>{point.percentage:.1f}%</b>';
		   subtitle.text = " ";
	   };
	   if(type == 'column'){//柱图设置Y坐标最小值
		   yAxis.min = Math.min.apply(null,data1)-1;
	   };
	   var series =  [
			      {
			         name: tuli1,
			         data: data1
			      }
			   ];
	   var plotOptions = {
			series : {
				events : {
					legendItemClick : function(e) {
						if(data2.length == 0){
							return false; // 直接 return false 即可禁用图例点击事件
						}else{
							return true;
						}						
					}
				},
				maxPointWidth : 100//最大宽度
			}
		}
	   var json = {};
	   json.title = title;
	   
	   json.xAxis = xAxis;
	   json.yAxis = yAxis;
	   json.tooltip = tooltip;
	   json.series = series;
	   json.plotOptions = plotOptions;
	   json.credits = credits;
	   json.chart = chart;
	   json.subtitle = subtitle;
	   $('#' + id).highcharts(json);
	}
	
	
	/*highcharts按班查看统一设置值函数*/
	/*("container_day_ban_1",x_zuobiao,title1,tooltip1,data11,data12,data13)*/
	function chart_ban(id,x_zuobiao,title,tooltip,data1,data2,data3){
		/*设置横坐标间隔 X坐标最多放15个*/
		
		var dateLength = x_zuobiao.length;
		var itv = 1;
		for(var i = 15; i < dateLength; i++){
			itv = Math.ceil(i/15);//对15向上取整，所以interval最大值为15
	    		//alert(interval)
		   }
			var title = {
			       text: title   
			   };
			var chart = {
					type: 'line'
			   };
			   var xAxis = {
			       categories: x_zuobiao,
			       tickInterval:itv
			   };
		       var credits= {
		           enabled: false
		       };
			   var yAxis = {
			      title: {
			         text: ' '
			      },
			      plotLines: [{
			         value: 0,
			         width: 1,
			         color: '#808080'
			      }]
			   };   
			   var tooltip = {
				  
			      valueSuffix: tooltip,
			      useHTML: true,
			      shared:true,
			      crosshairs: [{
	                width: 1,
	                color: 'red'
			      }]
			   };
			   var series =  [
					      {
					         name: "白班",
					         data: data1,
					         dashStyle: 'longdash'
					      },
					      {
					         name: "中班",
					         data: data2,
					         dashStyle: 'shortdot'
					      },
					      {
					         name: "夜班",
					         data: data3
					      }
					   ];
			   var plotOptions = {
					series : {
						events : {
							legendItemClick : function(e) {
								if(data2.length == 0){
									return false; // 直接 return false 即可禁用图例点击事件
								}else{
									return true;
								}						
							}
						},
						maxPointWidth : 100//最大宽度
					}
				}
			   
			   var json = {};
			   json.title = title;
			   json.chart = chart;
			   json.xAxis = xAxis;
			   json.yAxis = yAxis;
			   json.tooltip = tooltip;
			   json.series = series;
			   json.plotOptions = plotOptions;
			   json.credits = credits;
			   $('#' + id).highcharts(json);
	}
	
	//日期转化
	function renderTime(date,ifyear) {
		var da = new Date(parseInt(date.replace("/Date(", "").replace(")/", "")
				.split("+")[0]));
		var year = da.getFullYear();
		var month = da.getMonth() + 1 < 10 ? "0" + (da.getMonth() + 1) : da
				.getMonth() + 1;
		var date = da.getDate() < 10 ? "0" + da.getDate() : da.getDate();
		var hour = da.getHours() < 10 ? "0" + da.getHours() : da.getHours();
		var minute = da.getMinutes() < 10 ? "0" + da.getMinutes() : da
				.getMinutes();
		var second = da.getSeconds() < 10 ? "0" + da.getSeconds() : da
				.getSeconds();
		if(ifyear == true){
			return year + "/" + month + "/" + date;
		}else{
			return month + "/" + date;
		}
	}
  //获取项目根路径
  function getRootPath(){
	    //获取当前网址，如： http://localhost:8083/uimcardprj/share/meun.jsp  
	    var curWwwPath=window.document.location.href;  
	    //获取主机地址之后的目录，如： uimcardprj/share/meun.jsp  
	    var pathName=window.document.location.pathname;  
	    var pos=curWwwPath.indexOf(pathName);  
	    //获取主机地址，如： http://localhost:8083  
	    var localhostPaht=curWwwPath.substring(0,pos);  
	    //获取带"/"的项目名，如：/uimcardprj  
	    var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);  
	    return(localhostPaht+projectName);  
	}  
  
  
  
  /*滚动固定导航栏*/
  var win = $(window);
  var doc = $(document);
  var fl = true;
  win.scroll(function() {
	  myScroll("tbl_hd_dd","energy_day");
	  myScroll("tbl_hd_db","energy_day_ban");
	  myScroll("tbl_hd_md","energy_month_day");
	  myScroll("tbl_hd_mb","energy_month_ban");
  });
  
  
  //页面滚动时的函数
  function myScroll(tbl_hd,rel_tbl) {
	var realL = $("#"+rel_tbl).find("tr").length;
	
	maxH = 30 * (realL) + 90;
	
  	if (doc.scrollTop() >= 90) { //大于头部高度
  		$("."+tbl_hd).css("visibility","visible");
  	} else if (doc.scrollTop() <= 90) { //相反
  		$("."+tbl_hd).css("visibility","hidden");
  	};
  	if (doc.scrollTop() >= maxH) { //大于表哥格高度
  		$("."+tbl_hd).css("visibility","hidden");
  	};
  }
  


  

});

    /*合并行*/
   _w_table_rowspan("#energy_day_ban",1);
   _w_table_rowspan("#energy_month_ban",1);
   
   function _w_table_rowspan(_w_table_id,_w_table_colnum){
	   _w_table_firsttd = "";
	   _w_table_currenttd = "";
	   _w_table_SpanNum = 0;
	   _w_table_Obj = $(_w_table_id + " tr td:nth-child(" + _w_table_colnum + ")");
	   _w_table_Obj.each(function(i){
	       if(i==0){
	           _w_table_firsttd = $(this);
	           _w_table_SpanNum = 1;
	       }else{
	           _w_table_currenttd = $(this);
	           if(_w_table_firsttd.text()==_w_table_currenttd.text()){
	               _w_table_SpanNum++;
	               _w_table_currenttd.hide(); //remove();
	               _w_table_firsttd.attr("rowSpan",_w_table_SpanNum);
	           }else{
	               _w_table_firsttd = $(this);
	               _w_table_SpanNum = 1;
	           }
	       }
	   }); 
	};
   
	Number.prototype.toFixed = function(s)  
	{  
	    
	    var f = Math.round(this * Math.pow( 10, s ))/ Math.pow( 10, s );  
        var s = f.toString();    
        var rs = s.indexOf('.');    
        if (rs < 0) {    
            rs = s.length;    
            s += '.';    
        }    
        while (s.length <= rs + 2) {    
            s += '0';    
        }    
        return s;  
	}  
